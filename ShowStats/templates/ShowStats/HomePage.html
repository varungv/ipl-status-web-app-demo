<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>IPL Stats</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
</head>
<body>
    <div class="container">
        <h1 class="jumbotron">IPL STATS</h1>
        <form action="." method="post">
            {% csrf_token %}
            <label for="season">Season: </label>
            <select name="season" onchange="document.getElementById('submit-button').click()" class="form-control">
                {% for s in seasons %}
                    <option value={{s.season}} {% if s.season == selected_season %}selected{% endif %}>{{ s.season }}</option>
                {% endfor %}
            </select>
            <button type="submit" id="submit-button" hidden>Submit</button>
        </form>

        <hr>

        {% if selected_season %}
            <div class="row">
                <div class="col-6">
                    <h4>Top 4 winners of all time</h4>
                    <div>
                        <table class="table table-striped table-dark">
                            <tr><th>Team Name</th><th>Win Count</th></tr>
                            {% for winner in top_4_winners %}
                                <tr><td>{{ winner.winner }}</td><td>{{ winner.count }}</td></tr>
                            {% endfor %}
                        </table>
                    </div>
                </div>

                <div class="col-6">
                    <h5>{{ top_team_name }} max wins Venue</h5><div>{{ location_most_wins_for_top_team.venue }}, they have won a total of {{ venue.count }} times.</div>
                    <hr>
                    <h5>IPL Facts</h5>
                    <ul>
                        <li><b>{{ batting_chosen_perc }}%</b> of the time teams choose batting when they won the toss.</li>
                        <li>Maximum number of matches are played in <b>{{ max_matches_location.venue }}</b>, with a total of <b>{{ max_matches_location.count }}</b> matches played there.</li>
                    </ul>
                </div>
            </div>

            <hr>
            <div class="row">
                <div class="col-12">
                    <div class="row">
                        <h3>Highlights of {{ selected_season }} IPL Season</h3>
                        <ul>
                            <li><b>{{ max_man_of_the_match.player_of_match }}</b> was awarded a highest number of <b>player of the match </b> award ({{ max_man_of_the_match.count }} times)</li>
                            <li>Maximum number of matches was won by <b>{{ max_winning_team.winner }}</b></li>
                            <li><b>{{ won_by_highest_run_margin.winner }}</b> had won by the highest margin of {{ won_by_highest_run_margin.win_by_runs }} runs. <b>{{ won_by_highest_run_margin.player_of_match }}</b> was awarded the player of the match.</li>
                            <li><b>{{ won_by_highest_wicket_margin.winner }}</b> had won by the highest margin of {{ won_by_highest_wicket_margin.win_by_wickets }} wickets. <b>{{ won_by_highest_run_margin.player_of_match }}</b> was awarded the player of the match.</li>
                            <li>Teams which have won the toss and have also won the match by <b>{{ count_of_won_toss_match }} times</b>.</li>
                            <li><b>{{ top_toss_winners.toss_winner }}</b> have won the highest number of tosses in the entire season. {{ top_toss_winners.count }} times</li>
                        </ul>
                    </div>
                </div>
            </div>

            <hr>

            <div class="row">
                <div class="col-12">
                    <h5>Bowlers who have conceeded maximum number of runs the entire season of {{ selected_season }}</h5>
                    <div>
                        <table class="table table-striped table-dark">
                            <tr><th>Bowler Name</th><th>Runs</th></tr>
                            {% for bowler in worst_economy_bowler %}
                                <tr><td>{{ bowler.bowler }}</td><td>{{ bowler.runs_sum }}</td></tr>
                            {% endfor %}
                        </table>
                    </div>
                </div>
            </div>
        {% endif %}
    </div>
<script>
{% if not selected_season %}
    document.getElementById('submit-button').click()
{% endif %}
</script>
</body>
</html>